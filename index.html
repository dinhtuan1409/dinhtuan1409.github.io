<!DOCTYPE html>
<html lang="vi" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>K·ª∑ ni·ªám 2 nƒÉm</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        display: ['Great Vibes', 'cursive'],
                    },
                    colors: {
                        'custom-bg': '#f0f7ff',
                        'custom-text': '#2c3e50',
                        'custom-light': '#cfe2f3',
                        'custom-accent': '#7aa8bf',
                    }
                }
            }
        }
    </script>
    
    <style>
        /* Hi·ªáu ·ª©ng m≈©i t√™n nh·∫•p nh√°y */
        @keyframes bounce {
            0%, 100% {
                transform: translateY(-25%);
                animation-timing-function: cubic-bezier(0.8, 0, 1, 1);
            }
            50% {
                transform: translateY(0);
                animation-timing-function: cubic-bezier(0, 0, 0.2, 1);
            }
        }
        .animate-bounce {
            animation: bounce 1.5s infinite;
        }
    </style>
</head>
<body class="font-sans antialiased bg-custom-bg text-custom-text">

    <audio id="backgroundMusic" autoplay loop muted>
        <source src="music/lovesong.mp3" type="audio/mp3">
        Tr√¨nh duy·ªát c·ªßa b·∫°n kh√¥ng h·ªó tr·ª£ ph·∫ßn t·ª≠ audio.
    </audio>
    
    <button id="toggleMusicBtn" 
            class="fixed top-4 right-4 z-50 p-2 bg-custom-accent/80 text-white rounded-full shadow-lg hover:bg-custom-accent transition duration-200">
        <svg id="musicOnIcon" class="w-6 h-6 hidden" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.536 7.425A1.75 1.75 0 008 8.75v3.5c0 .777.834 1.253 1.536.825l3.5-2.25a1.75 1.75 0 000-2.85l-3.5-2.25z" clip-rule="evenodd" />
        </svg>
        <svg id="musicOffIcon" class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
            <path d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.75 8a.75.75 0 00-.75.75v3.5a.75.75 0 001.5 0V9.5h1.25a.75.75 0 00.75-.75V8a.75.75 0 00-.75-.75H9.5a.75.75 0 00-.75.75zM12 11.25a.75.75 0 000 1.5h1.5a.75.75 0 000-1.5H12zM7.75 11.25a.75.75 0 000 1.5h1.5a.75.75 0 000-1.5H7.75z" />
        </svg>
    </button>


    <section id="hero" class="h-screen w-full flex flex-col justify-center items-center relative text-white" 
             style="background-image: url('img/38.jpg'); background-size: cover; background-position: center;">
        
        <div class="absolute inset-0 bg-black/50"></div>
        
        <div class="relative z-10 text-center p-4">
            <h1 class="font-display text-6xl md:text-8xl mb-4">2 NƒÉm C√πng Nhau</h1>
            <h2 class="text-3xl md:text-4xl mb-2 font-light tracking-wide">[BiQi] & [DiTi]</h2>
            <p class="text-lg opacity-90">Ng√†y 14 th√°ng 11 nƒÉm 2023 - Ng√†y ch√∫ng ta b·∫Øt ƒë·∫ßu</p>
        </div>
        
        <a href="#story" class="absolute bottom-10 z-10 animate-bounce" aria-label="Cu·ªôn xu·ªëng ph·∫ßn c√¢u chuy·ªán">
            <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"></path></svg>
        </a>
    </section>

    <section id="story" class="py-24 px-6">
        <div class="max-w-3xl mx-auto text-center">
            <h2 class="font-display text-5xl md:text-6xl mb-8">Chuy·ªán c·ªßa ch√∫ng m√¨nh...</h2>
            <img src="img/story-start.jpg" 
                 alt="Ng√†y ƒë·∫ßu ti√™n" 
                 class="w-full max-w-lg mx-auto rounded-lg shadow-xl mb-8 object-contain h-auto"
                 onerror="this.src='img/anh10.jpg'">
            <p class="text-lg md:text-xl leading-relaxed">
                Hai nƒÉm tr∆∞·ªõc, anh th·∫≠t may m·∫Øn khi g·∫∑p ƒë∆∞·ª£c b√© v√† t·ª´ ƒë√≥, ch√∫ng ta ƒë√£ c√≥ m·ªôt h√†nh tr√¨nh th·∫≠t ƒë·∫πp.
            </p>
        </div>
    </section>

    <section id="gallery" class="py-24 px-6 bg-white">
        <div class="max-w-7xl mx-auto">
            <h2 class="font-display text-5xl md:text-6xl text-center mb-16">Nh·ªØng M·∫£nh Gh√©p K·ª∑ Ni·ªám</h2>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <div class="bg-custom-bg rounded-lg shadow-xl overflow-hidden transform hover:scale-105 transition-transform duration-300 cursor-pointer"
                     onclick="openGallery('album1')" role="button" aria-label="M·ªü Album 1: Nh·ªØng Chuy·∫øn ƒêi">
                    <img src="img/bia3.png" alt="Nh·ªØng chuy·∫øn ƒëi" class="w-full h-64 object-contain" onerror="this.src='https://placehold.co/600x400'">
                    <div class="p-6">
                        <h3 class="text-2xl font-semibold mb-2">Album 1: Nh·ªØng Chuy·∫øn ƒêi</h3>
                        <p class="text-custom-text/80">"Nh·ªØng n∆°i ch√∫ng ta ƒë√£ c√πng nhau kh√°m ph√°"</p>
                    </div>
                </div>
                
                <div class="bg-custom-bg rounded-lg shadow-xl overflow-hidden transform hover:scale-105 transition-transform duration-300 cursor-pointer"
                     onclick="openGallery('album2')" role="button" aria-label="M·ªü Album 2: G√≥c ·∫®m Th·ª±c">
                    <img src="img/bia4.png" alt="G√≥c ·∫©m th·ª±c" class="w-full h-64 object-contain" onerror="this.src='https://placehold.co/600x400'">
                    <div class="p-6">
                        <h3 class="text-2xl font-semibold mb-2">Album 2: Nh·ªØng ng√†y nh∆∞ bao ng√†y</h3>
                        <p class="text-custom-text/80">"Y√™u c·∫£ nh·ªØng l√∫c b√¨nh y√™n v√† 'l·∫ßy l·ªôi' th·∫ø n√†y."</p>
                    </div>
                </div>
                
                <div class="bg-custom-bg rounded-lg shadow-xl overflow-hidden transform hover:scale-105 transition-transform duration-300 cursor-pointer"
                     onclick="openGallery('album3')" role="button" aria-label="M·ªü Album 3: Ch·ªâ L√† Ng√†y B√¨nh Th∆∞·ªùng">
                    <img src="img/bia5.png" alt="Ng√†y b√¨nh th∆∞·ªùng" class="w-full h-64 object-contain" onerror="this.src='https://placehold.co/600x400'">
                    <div class="p-6">
                        <h3 class="text-2xl font-semibold mb-2">Album 3: Stalk ƒë·ªùi ƒë·∫ßu</h3>
                        <p class="text-custom-text/80">"Nh·ªØng t·∫•m h√¨nh m√† a l∆∞u khi m·ªõi c·∫£m n·∫Øng b√© n√® hehe"</p>
                    </div>
                </div>
                
                <div class="bg-custom-bg rounded-lg shadow-xl overflow-hidden transform hover:scale-105 transition-transform duration-300 cursor-pointer"
                     onclick="openGallery('album4')" role="button" aria-label="M·ªü Album 4: Nh·ªØng D·ªãp ƒê·∫∑c Bi·ªát">
                    <img src="img/bia1.png" alt="D·ªãp ƒë·∫∑c bi·ªát" class="w-full h-64 object-contain" onerror="this.src='https://placehold.co/600x400'">
                    <div class="p-6">
                        <h3 class="text-2xl font-semibold mb-2">Album 4: Nh·ªØng t·∫•m h√¨nh c·∫£ 2 ch·ª•p v·ªõi nhau </h3>
                        <p class="text-custom-text/80">"Nh·ªØng k·ªâ ni·ªám ta ch·ª•p v·ªõi nhauuu"</p>
                    </div>
                </div>
                
                <div class="bg-custom-bg rounded-lg shadow-xl overflow-hidden transform hover:scale-105 transition-transform duration-300 cursor-pointer"
                     onclick="openGallery('album5')" role="button" aria-label="M·ªü Album 5: G∆∞∆°ng M·∫∑t Th∆∞∆°ng Hi·ªáu">
                    <img src="img/bia2.png" alt="G∆∞∆°ng m·∫∑t th∆∞∆°ng hi·ªáu" class="w-full h-64 object-contain" onerror="this.src='https://placehold.co/600x400'">
                    <div class="p-6">
                        <h3 class="text-2xl font-semibold mb-2">Album 5: V√† ƒë√¢y l√† c√¥ng ch√∫a c·ªßa anh"</h3>
                        <p class="text-custom-text/80">"Nh·ªØng b·ª©c ·∫£nh c·ªßa m·ªôt n√†ng c√¥ng ch√∫a xinh ƒë·∫πpppp"</p>
                    </div>
                </div>

            </div>
        </div>
    </section>

    <section id="then-now" class="py-24 px-6">
        <div class="max-w-5xl mx-auto text-center">
            <h2 class="font-display text-5xl md:text-6xl mb-16">Ch√∫ng ta c·ªßa 2 nƒÉm</h2>
            <div class="flex flex-col md:flex-row justify-center items-center gap-8 md:gap-12">
                <div class="flex-1">
                    <img src="img/35.jpg" alt="B·ª©c ·∫£nh ƒë·∫ßu ti√™n" class="w-full rounded-lg shadow-xl object-contain h-auto" onerror="this.src='https://placehold.co/600x600'">
                    <h3 class="text-2xl font-semibold mt-6">B·ª©c ·∫¢nh ƒê·∫ßu Ti√™n</h3>
                </div>
                
                <div class="hidden md:block">
                    <svg class="w-12 h-12 text-custom-accent" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path></svg>
                </div>
                
                <div class="flex-1">
                    <img src="img/11.jpg" alt="B·ª©c ·∫£nh g·∫ßn ƒë√¢y" class="w-full rounded-lg shadow-xl object-contain h-auto" onerror="this.src='https://placehold.co/600x600'">
                    <h3 class="text-2xl font-semibold mt-6">B·ª©c ·∫¢nh G·∫ßn ƒê√¢y</h3>
                </div>
            </div>
            <p class="text-lg md:text-xl leading-relaxed mt-12 max-w-2xl mx-auto">
                "Ch√∫ng ta ƒë√£ ƒëi c√πng nhau, c√πng nhau tr∆∞·ªüng th√†nh su·ªët 2 nƒÉm n√®ee"
            </p>
        </div>
    </section>
    <section id="note" class="py-24 px-6">
        <div class="max-w-3xl mx-auto text-center">
            <h2 class="font-display text-5xl md:text-6xl mb-8">G·ª≠i c√¥ b√© m·∫°nh m·∫Ω c·ªßa anh,</h2>
            <img src="img/14.jpg" 
                 alt="Ng∆∞·ªùi th∆∞∆°ng" 
                 class="w-full max-w-md mx-auto rounded-lg shadow-xl mb-10 object-contain h-auto"
                 onerror="this.src='https://placehold.co/600x600'">
            
            <div class="text-lg md:text-xl text-left italic leading-loose space-y-5 bg-white p-8 md:p-12 rounded-lg shadow-inner">
                <p>C·∫£m ∆°n b√© v√¨ ƒë√£ lu√¥n ·ªü b√™n anh, trong c·∫£ nh·ªØng l√∫c vui v·∫ª l·∫´n khi kh√≥ khƒÉn. Hai nƒÉm qua l√† m·ªôt h√†nh tr√¨nh tuy·ªát v·ªùi, l·∫•p ƒë·∫ßy b·ªüi nh·ªØng ti·∫øng c∆∞·ªùi, nh·ªØng b√†i h·ªçc v√† v√¥ v√†n y√™u th∆∞∆°ng.</p>
                <p>ƒêi·ªÅu anh lu√¥n tr√¢n tr·ªçng nh·∫•t l√† ƒë∆∞·ª£c nh√¨n th·∫•y b√© b√™n anh c∆∞·ªùi n√≥i, c·∫£m ∆°n s·ª± ki√™n nh·∫´n c·ªßa b√© v·ªõi anh v√¨ nhi·ªÅu l√∫c anh c√≥ nh·ªØng h√†nh ƒë·ªông c∆∞ x·ª≠ kh√¥ng ƒë√∫ng nh∆∞ng b√© v·∫´n ch·ªâ ra v√† b·ªè qua cho anh.</p>
                <p>Hai nƒÉm l√† kh·ªüi ƒë·∫ßu c·ªßa m·ªôt ch·∫∑ng ƒë∆∞·ªùng d√†i, v√† ch√∫ng ta s·∫Ω c√πng nhau ƒëi ti·∫øp tr√™n ch·∫∑ng ƒë∆∞·ªùng ƒë√≥ qu√†i qu√†i lu√¥n. Anh th∆∞∆°ng b√© nhi·ªÅu l·∫Ømmmmm.</p>
            </div>
        </div>
    </section>

    <footer class="py-16 bg-custom-text text-custom-bg text-center">
        <h3 class="font-display text-4xl md:text-5xl mb-4">Happy 2nd Anniversary!</h3>
        <p class="text-lg opacity-90">Ch√∫ng ta s·∫Ω ·ªü c·∫°nh nhau trong nh·ªØng h√†nh tr√¨nh ti·∫øp theo.</p>
        <p class="mt-6 text-sm opacity-70">T·∫°o b·ªüi DiTi v·ªõi t·∫•t c·∫£ t√¨nh y√™u d√†nh cho n√†ng c√¥ng ch√∫a BiQi hehe</p>
    </footer>

    <div id="galleryModal" class="fixed inset-0 bg-black/70 hidden items-center justify-center z-[9999] p-4" aria-hidden="true" role="dialog" aria-modal="true">
        <div class="bg-white rounded-xl max-w-4xl w-full relative p-4 shadow-xl flex flex-col max-h-[90vh]">
            
            <button id="closeGalleryBtn" aria-label="ƒê√≥ng" 
                    class="absolute top-3 right-3 text-3xl font-bold text-gray-500 hover:text-black z-30">&times;</button>

            <h3 id="albumTitle" class="text-2xl font-semibold mb-4 text-center flex-shrink-0"></h3>

           <div id="albumContent" class="relative w-full flex-grow flex flex-col justify-center min-h-[60vh] md:min-h-[70vh] p-4">
                <div id="slidesContainer" class="w-full max-h-[90vh] relative overflow-hidden bg-black rounded-lg flex items-center justify-center p-4">
                </div>
             
                <!-- N√∫t prev/next v√† index gi·ªØ nguy√™n -->
      

                <button id="nextBtn" class="absolute right-0 top-1/2 transform -translate-y-1/2 p-3 bg-black/50 text-white rounded-l-lg z-20 hover:bg-black/80 transition" aria-label="Ti·∫øp theo">
                    <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M9 5l7 7-7 7"></path></svg>
                </button>

                <button id="prevBtn" class="absolute left-0 top-1/2 transform -translate-y-1/2 p-3 bg-black/50 text-white rounded-r-lg z-20 hover:bg-black/80 transition" aria-label="Tr∆∞·ªõc ƒë√≥">
                    <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M15 19l-7-7 7-7"></path></svg>
                </button>

                <div id="slideIndex" class="absolute bottom-6 left-1/2 transform -translate-x-1/2 bg-black/50 text-white px-4 py-1 rounded text-lg z-20 font-medium"></div>
            </div>

        </div>
    </div>

    <section id="final-question" class="py-24 px-6 bg-custom-light text-center">
        <div class="max-w-3xl mx-auto">
            <h2 class="font-display text-5xl md:text-6xl mb-12">V√† c√¢u h·ªèi cu·ªëi c√πng</h2>
            <h2 class="font-display text-5xl md:text-6xl mb-12">B√© c√≥ th∆∞∆°ng anh iu kh√¥ng hehe ch·ªçn 1 trong 2 ƒë√°p √°n nh√©!!!</h2>
            
            <div class="relative flex justify-center gap-16 h-40 items-center">
                <button id="yesBtn" class="bg-custom-accent text-white text-2xl md:text-3xl font-semibold py-4 px-10 rounded-xl transition-all duration-300">
                    C√≥oo ‚ù§Ô∏è
                </button>
                <button id="noBtn" class="bg-red-500 text-white text-2xl md:text-3xl font-semibold py-4 px-10 rounded-xl transition-all duration-300">
                    Kh√¥nggg üòí
                </button>
            </div>
        </div>
    </section>

    <script>
        /* Danh s√°ch n·ªôi dung c·ªßa t·ª´ng album */
        const albumImages = {
            album1: {
                title: "Album 1: Nh·ªØng Chuy·∫øn ƒêi",
                items: [
                    { src: "video/video14.mp4", type: "video" },
                    { src: "video/video13.mp4", type: "video" }, 
                    { src: "video/video8.mp4", type: "video" },
                    { src: "img/38.jpg", type: "image" }, 
                    { src: "img/anh18.jpg", type: "image" }
                ]
            },
            album2: {
                title: "Album 2: Ng√†y B√¨nh Th∆∞·ªùng",
                items: [
                    { src: "video/video2.mp4", type: "video" },
                    { src: "video/video3.mp4", type: "video" },
                    { src: "video/video7.mp4", type: "video" },
                    { src: "video/video5.mp4", type: "video" },
                    { src: "video/video11.mp4", type: "video" },
                    { src: "img/4.jpg", type: "image" }, 
                    { src: "img/5.jpg", type: "image" }, 
                    { src: "img/12.jpg", type: "image" },
                    { src: "img/21.jpg", type: "image" },
                    { src: "img/anh20.jpg", type: "image" }
                ]
            },
            album3: {
                title: "Album 3: Stalk ƒë·ªùi ƒë·∫ßu",
                items: [
                    { src: "img/46.jpg", type: "image" }, 
                    { src: "img/anh1.jpg", type: "image" },
                    { src: "img/25.jpg", type: "image" },
                    { src: "img/22.jpg", type: "image" },
                    { src: "img/anh19.jpg", type: "image" }
                ]
            },
            album4: {
                title: "Album 4: Nh·ªØng ng√†y ƒëi ch∆°i",
                items: [
                    { src: "video/video6.mp4", type: "video" },
                    { src: "video/video9.mp4", type: "video" },
                    { src: "img/anh10.jpg", type: "image" },
                    { src: "img/39.jpg", type: "image" }, 
                    { src: "img/anh16.jpg", type: "image" }, 
                    { src: "img/36.jpg", type: "image" }, 
                    { src: "img/6.jpg", type: "image" },
                    { src: "img/40.jpg", type: "image" },
                    { src: "img/32.jpeg", type: "image" },
                    { src: "img/anh8.jpg", type: "image" },
                    { src: "img/anh41.jpg", type: "image" },
                    { src: "img/13.jpg", type: "image" },
                    { src: "img/tet.jpg", type: "image" },
                ]
            },
            album5: {
                title: "Album 5: C√¥ng ch√∫a c·ªßa anh",
                items: [
                    { src: "img/34.jpg", type: "image" }, 
                    { src: "img/3.jpg", type: "image" }, 
                    { src: "img/23.jpeg", type: "image" }, 
                    { src: "img/27.jpg", type: "image" },
                    { src: "img/28.jpg", type: "image" },
                    { src: "img/37.jpg", type: "image" },
                    { src: "img/47.jpeg", type: "image" },
                    { src: "img/48.jpeg", type: "image" },
                    { src: "img/anh15.jpg", type: "image" },
                    { src: "img/anh11.jpg", type: "image" },
                    { src: "img/44.jpg", type: "image" },
                ]
            }
        };

        const modal = document.getElementById("galleryModal");
        const albumTitleEl = document.getElementById("albumTitle");
        const closeGalleryBtn = document.getElementById("closeGalleryBtn");
        
        // C√ÅC BI·∫æN CHO TR√åNH CHI·∫æU
        const slidesContainerEl = document.getElementById("slidesContainer");
        const nextBtn = document.getElementById("nextBtn");
        const prevBtn = document.getElementById("prevBtn");
        const slideIndexEl = document.getElementById("slideIndex");

        let currentAlbumItems = [];
        let currentSlideIndex = 0;
        
        // Audio elements (Gi·ªØ nguy√™n)
        const backgroundMusic = document.getElementById('backgroundMusic');
        const toggleMusicBtn = document.getElementById('toggleMusicBtn');
        const musicOnIcon = document.getElementById('musicOnIcon');
        const musicOffIcon = document.getElementById('musicOffIcon');
        let isMutedByUser = false; 

        // -------------------------------------
        // V√ôNG CODE X·ª¨ L√ù AUDIO (Gi·ªØ nguy√™n)
        // -------------------------------------

        function startMutedPlayback() {
            backgroundMusic.play().catch(error => {});
        }

        const enableAudio = () => {
            if (!backgroundMusic.muted || isMutedByUser) {
                return;
            }

            backgroundMusic.play().then(() => {
                backgroundMusic.muted = false; 
                musicOnIcon.classList.remove('hidden');
                musicOffIcon.classList.add('hidden');
            }).catch(error => {
                console.log("Kh√¥ng th·ªÉ t·ª± ƒë·ªông b·∫≠t ti·∫øng. C·∫ßn t∆∞∆°ng t√°c th√™m.");
            });
            
            document.removeEventListener('click', enableAudio);
            document.removeEventListener('scroll', enableAudio);
            document.removeEventListener('touchstart', enableAudio);
        };

        toggleMusicBtn.addEventListener('click', () => {
            if (backgroundMusic.muted) {
                backgroundMusic.muted = false; 
                backgroundMusic.play();
                isMutedByUser = false; 
                musicOnIcon.classList.remove('hidden');
                musicOffIcon.classList.add('hidden');
            } else {
                backgroundMusic.muted = true; 
                backgroundMusic.pause(); 
                isMutedByUser = true; 
                musicOnIcon.classList.add('hidden');
                musicOffIcon.classList.remove('hidden');
            }
        });

        startMutedPlayback();
        document.addEventListener('click', enableAudio, { once: true });
        document.addEventListener('scroll', enableAudio, { once: true });
        document.addEventListener('touchstart', enableAudio, { once: true }); 
        // -------------------------------------
        // END V√ôNG CODE X·ª¨ L√ù AUDIO
        // -------------------------------------

        // -------------------------------------
        // C√ÅC H√ÄM X·ª¨ L√ù TR√åNH CHI·∫æU M·ªöI (ƒê√£ th√™m check l·ªói ƒë∆∞·ªùng d·∫´n)
        // -------------------------------------

        function showSlide(n) {
            if (currentAlbumItems.length === 0) return;

            currentSlideIndex = (n + currentAlbumItems.length) % currentAlbumItems.length;
            slidesContainerEl.querySelectorAll('video').forEach(v => v.pause());
            slidesContainerEl.innerHTML = '';

            const item = currentAlbumItems[currentSlideIndex];
            const wrapper = document.createElement('div');
            wrapper.className = "flex items-center justify-center w-full h-auto max-h-[90vh]";

            if (item.type === 'image') {
                const img = new Image();
                img.src = item.src;
                img.alt = 'K·ª∑ ni·ªám';
                img.className = "max-w-full max-h-[90vh] w-auto h-auto object-contain rounded-lg shadow-2xl";

                img.onload = () => {
                    // T·ª± ƒë·ªông ƒëi·ªÅu ch·ªânh chi·ªÅu cao container theo ·∫£nh
                    slidesContainerEl.style.height = 'auto';
                    slidesContainerEl.style.minHeight = '50vh';
                    wrapper.appendChild(img);
                    slidesContainerEl.appendChild(wrapper);
                };

                img.onerror = () => {
                    wrapper.innerHTML = `<div class="text-red-400 bg-black/80 p-6 rounded-lg text-center">L·ªói ·∫£nh: ${item.src}</div>`;
                    slidesContainerEl.appendChild(wrapper);
                };
            } 
            else if (item.type === 'video') {
                const video = document.createElement('video');
                video.src = item.src;
                video.controls = true;
                video.autoplay = true;
                video.muted = true;
                video.loop = true;
                video.playsInline = true;
                video.className = "max-w-full max-h-[90vh] w-auto h-auto object-contain rounded-lg shadow-2xl";

                video.onloadstart = () => {
                    slidesContainerEl.style.height = 'auto';
                    slidesContainerEl.style.minHeight = '50vh';
                };

                video.onerror = () => {
                    wrapper.innerHTML = `<div class="text-red-400 bg-black/80 p-6 rounded-lg text-center">L·ªói video: ${item.src}</div>`;
                };

                wrapper.appendChild(video);
                slidesContainerEl.appendChild(wrapper);
            }

            slideIndexEl.textContent = `${currentSlideIndex + 1} / ${currentAlbumItems.length}`;
        }
        function nextSlide() {
            showSlide(currentSlideIndex + 1);
        }

        function prevSlide() {
            showSlide(currentSlideIndex - 1);
        }

        // H√ÄM M·ªû GALLERY
        function openGallery(albumId) {
            const data = albumImages[albumId];
            if (!data) return;

            albumTitleEl.textContent = data.title;
            
            // L∆∞u tr·ªØ n·ªôi dung album hi·ªán t·∫°i
            currentAlbumItems = data.items;
            
            // Thi·∫øt l·∫≠p s·ª± ki·ªán cho n√∫t ƒëi·ªÅu h∆∞·ªõng (ƒë·∫£m b·∫£o ch·ªâ th√™m 1 l·∫ßn)
            nextBtn.removeEventListener("click", nextSlide); 
            prevBtn.removeEventListener("click", prevSlide);
            nextBtn.addEventListener("click", nextSlide);
            prevBtn.addEventListener("click", prevSlide);

            // K√≠ch ho·∫°t slide ƒë·∫ßu ti√™n
            showSlide(0);

            // Hi·ªÉn th·ªã Modal
            modal.classList.remove("hidden");
            modal.classList.add("flex");
            modal.setAttribute("aria-hidden", "false");
            document.body.style.overflow = "hidden";
        }

        function closeGallery() {
            // D·ª´ng video hi·ªán t·∫°i n·∫øu c√≥
            slidesContainerEl.querySelectorAll('video').forEach(video => {
                video.pause();
            });
            modal.classList.add("hidden");
            modal.classList.remove("flex");
            modal.setAttribute("aria-hidden", "true");
            document.body.style.overflow = ""; // restore
        }

        closeGalleryBtn.addEventListener("click", closeGallery);
        modal.addEventListener("click", (e) => {
            // ƒê√≥ng modal khi nh·∫•p ra ngo√†i (ch·ªâ khi target l√† modal overlay)
            if (e.target === modal) closeGallery();
        });
        
        document.addEventListener("keydown", (e) => {
            if (!modal.classList.contains("hidden")) {
                if (e.key === "ArrowRight") {
                    nextSlide();
                } else if (e.key === "ArrowLeft") {
                    prevSlide();
                } else if (e.key === "Escape") {
                    closeGallery();
                }
            }
        });

        // CODE HI·ªÜU ·ª®NG N√öT "NO" (Gi·ªØ nguy√™n)
        const yesBtn = document.getElementById("yesBtn");
        const noBtn = document.getElementById("noBtn");
        let noCounter = 0; 
        let yesScale = 1;

        function moveNoButton() {
            const container = noBtn.parentElement;
            const containerRect = container.getBoundingClientRect();
            const btnRect = noBtn.getBoundingClientRect();
            const yesRect = yesBtn.getBoundingClientRect();

            const yesX = yesBtn.offsetLeft;
            const yesY = yesBtn.offsetTop;
            
            const yesWidth = yesRect.width;
            const yesHeight = yesRect.height;
            
            const safeZone = 80; 

            const maxX = containerRect.width - btnRect.width;
            const maxY = containerRect.height - btnRect.height;

            let randX, randY;
            let isTooClose;

            do {
                randX = Math.random() * maxX;
                randY = Math.random() * maxY;

                const isLeft = randX + btnRect.width + safeZone < yesX;
                const isRight = randX > yesX + yesWidth + safeZone;
                const isAbove = randY + btnRect.height + safeZone < yesY;
                const isBelow = randY > yesY + yesHeight + safeZone;

                isTooClose = !(isLeft || isRight || isAbove || isBelow);

            } while (isTooClose || randX < 0 || randY < 0);

            noBtn.style.position = "absolute";
            noBtn.style.left = randX + "px";
            noBtn.style.top = randY + "px";
        }

        noBtn.addEventListener("mouseenter", () => {
            noCounter++;

            if(noCounter >= 5) {
                noBtn.style.display = "none";
                
            } else {
                moveNoButton();
                yesScale += 0.2;
                yesBtn.style.transform = `scale(${yesScale})`;
            }
        });

        yesBtn.addEventListener("click", () => {
            yesBtn.textContent = "Anh bi·∫øt m√† ‚ù§Ô∏è";
            yesBtn.style.transform = `scale(${yesScale + 0.2})`;
            noBtn.style.display = "none";
            
            toggleMusicBtn.style.display = 'none';
        });
    </script>
</body>
</html>